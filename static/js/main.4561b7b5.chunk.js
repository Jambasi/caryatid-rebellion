(this["webpackJsonpthesis-website-3"]=this["webpackJsonpthesis-website-3"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(8),i=n.n(s),d=(n(14),n(9)),o=n(3),c=n(4),l=n(6),p=n(5),h=(n(15),n(0)),u=n.n(h),w=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).create=function(){a.load(),a.createContainer(),a.createTitle(),a.createInstructions(),a.add()},a.componentDidUpdate=function(e){a.props.stage&&!a.state.hasAddedToStage&&(a.create(),a.setState({hasAddedToStage:!0})),!e.hasScrolled&&a.props.hasScrolled&&a.addClickInstructions(),a.props.loadedPercentage!==e.loadedPercentage&&a.addLoading()},a.add=function(){a.props.stage.addChild(a.container)},a.addArrow=function(){var e=window.innerWidth/15;a.arrowEl.setTransform(a.props.stage.canvas.width/2-e/2,window.innerHeight/4+a.props.stage.canvas.height/2+10,e/a.arrowEl.image.width,e/a.arrowEl.image.width),a.arrowY=window.innerHeight/4+a.props.stage.canvas.height/2+10,a.container.addChild(a.arrowEl),a.animateArrow()},a.addClickInstructions=function(){var e=window.innerWidth/15+10,t=window.innerHeight/20,n=window.innerHeight/4+a.props.stage.canvas.height/2+20+e,r=(new u.a.Text).set({text:"CLICK TO REPLAY COMICS",x:0,y:n,font:"".concat(t,"px custard, sans-serif"),lineWidth:window.innerWidth-30});a.container.addChild(r),r.x=a.props.stage.canvas.width/2,r.textAlign="center"},a.addLoading=function(){var e=a.props.loadedPercentage;if(e>=1)return a.container.removeChild(a.fill),void a.container.removeChild(a.bar);u.a.Tween.get(a.fill,{override:!0}).to({scaleX:e},150)},a.animateArrow=function(){a.arrowTween=u.a.Tween.get(a.arrowEl).to({y:a.arrowY-10},500).to({y:a.arrowY+10},500).call((function(){a.animateArrow()}))},a.createContainer=function(){var e=new u.a.Container;if(a.container=e,e.setBounds(0,0,window.innerWidth,window.innerHeight),!a.props.hasLoaded){var t=a.createLoadingBar(),n=t.bar,r=t.fill;e.addChild(n),e.addChild(r),a.fill=r,a.bar=n}a.setState({scale:{x:window.innerWidth,y:window.innerHeight}})},a.createInstructions=function(){var e=window.innerHeight/20,t=(new u.a.Text).set({text:"SCROLL",x:0,y:window.innerHeight/5+a.props.stage.canvas.height/2,font:"".concat(e,"px custard, sans-serif"),lineWidth:window.innerWidth-30});t.x=a.props.stage.canvas.width/2,t.textAlign="center",a.container.addChild(t)},a.createLoadingBar=function(){var e=new u.a.Shape,t=window.innerWidth/4,n=a.props.stage.canvas.height/2;e.graphics.setStrokeStyle(3).beginStroke("black").drawRoundRectComplex((window.innerWidth-t)/2,n,t,30,5,5,5,5).endStroke();var r=(new u.a.Shape).set({scaleX:0,x:(window.innerWidth-t)/2+1.5,y:n+1.5});return r.graphics.beginLinearGradientFill(["#4158D0","#C850C0","#FFCC70"],[0,.46,1],0,100,200,300).drawRoundRectComplex(0,0,t-3,27,5,5,5,5),{bar:e,fill:r}},a.createTitle=function(){var e=new u.a.Container,t=window.innerHeight/10,n=(new u.a.Text).set({text:"THE CARYATID REVOLUTION",x:0,y:0,font:"".concat(t,"px custard, sans-serif"),lineWidth:window.innerWidth-30});e.addChild(n),n.textAlign="center",e.x=a.props.stage.canvas.width/2,e.y=a.props.stage.canvas.height/2-a.props.stage.canvas.height/5,a.container.addChild(e)},a.handleLoad=function(e){a.arrowEl=new u.a.Bitmap(e.target,"down-arrow"),a.addArrow()},a.load=function(){var e=new Image;e.src="./title/down-arrow.png",e.onload=a.handleLoad},a.removeLoading=function(){a.container.removeChild(a.fill),a.container.removeChild(a.bar)},a.resize=function(){a.props.stage.removeChild(a.container),a.props.stage.removeChild(a.arrowEl),u.a.Tween.removeAllTweens(),a.createContainer(),a.createTitle(),a.createInstructions(),a.addArrow(),a.add()},a.state={hasAddedToStage:!1},a}return Object(c.a)(n,[{key:"render",value:function(){return null}}]),n}(r.a.Component),g=[{id:"CARD_1",src:"sprites/card1/card1.json"},{id:"CARD_2",src:"sprites/card2/card2.json"},{id:"CARD_3",src:"sprites/card3/card3.json"},{id:"CARD_4",src:"sprites/card4/card4.json"},{id:"CARD_5",src:"sprites/card5/card5.json"},{id:"CARD_6",src:"sprites/card6/card6.json"},{id:"CARD_7",src:"sprites/card7/card7.json"},{id:"CARD_9",src:"sprites/card9/card9.json"},{id:"CARD_10",src:"sprites/card10/card12.json"},{id:"CARD_12",src:"sprites/card12/card12.json"},{id:"CARD_19",src:"sprites/card20/card20.json"},{id:"CARD_21",src:"sprites/card22/card22.json"},{id:"CARD_25",src:"sprites/card26/card26.json"},{id:"CARD_27",src:"sprites/card28/card28.json"},{id:"CARD_28",src:"sprites/card29/card29.json"},{id:"CARD_29",src:"sprites/card30/card30.json"},{id:"CARD_31",src:"sprites/card32/card32.json"},{id:"CARD_33",src:"sprites/card34/card34.json"},{id:"CARD_35",src:"sprites/card36/card36.json"}],f=[{id:"CARD_8",src:"./stills/Still8.png"},{id:"CARD_11",src:"./stills/Still11.png"},{id:"CARD_13",src:"./stills/Still13.png"},{id:"CARD_14",src:"./stills/Still14.png"},{id:"CARD_15",src:"./stills/Still15.png"},{id:"CARD_16",src:"./stills/Still16.png"},{id:"CARD_17",src:"./stills/Still17.png"},{id:"CARD_18",src:"./stills/Still19.png"},{id:"CARD_20",src:"./stills/Still21.png"},{id:"CARD_22",src:"./stills/Still23.png"},{id:"CARD_23",src:"./stills/Still24.png"},{id:"CARD_24",src:"./stills/Still25.png"},{id:"CARD_26",src:"./stills/Still27.png"},{id:"CARD_30",src:"./stills/Still31.png"},{id:"CARD_32",src:"./stills/Still33.png"},{id:"CARD_34",src:"./stills/Still35.png"}],v=[{id:"PLACARD_1",src:"./placards/placard1/card9.json",after:{idx:8}},{id:"PLACARD_2",src:"./placards/placard2/card10.json",after:{idx:8}},{id:"PLACARD_3",src:"./placards/placard3/placard3.json",after:{idx:33}}],C=20,y=30,m=g.length+v.length+f.length,x=n(1),j=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).add=function(){a.transform(),a.props.stage.addChild(a.spriteEl),a.play()},a.handleLoad=function(e){a.spriteEl=new u.a.Sprite(e.result,a.id),a.props.handleLoad(a.props.id),a.add()},a.load=function(){var e=new u.a.LoadQueue(!1),t={src:a.props.src,id:a.props.id,type:"spritesheet",crossOrigin:!0};e.loadManifest(t,!0),e.on("fileload",a.handleLoad)},a.play=function(){a.spriteEl.play()},a.transform=function(){var e=window,t=e.innerWidth,n=e.innerHeight,r=window.innerWidth/10<C?C:window.innerWidth/10,s={x:0,y:0,w:0,h:0},i=1440,d=i+2*y>t,o=window.innerWidth<=600;s.w=d?t-r:i,s.w=o?t:s.w,s.h=200/i*s.w,s.x=(t-s.w)/2,s.x=o?0:s.x;var c=2.4*s.h,l=a.props.after.idx*c+(a.props.after.idx+1)*y*2;v.forEach((function(e){var t=e.id.split("_"),n=Number(t[t.length-1])-1;a.state.idx>n&&(l+=s.h+2*y)})),s.y=l+n;var p=s.w/i;a.spriteEl.setTransform(s.x,s.y,p,p),a.setState({transform:s}),"PLACARD_1"===a.props.id&&a.props.setTransform(s,"placards")};var r=e.id.split("_");return a.state={idx:Number(r[r.length-1])-1,transform:{x:0,y:0,w:0,h:0}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return Object(x.jsx)("div",{})}}]),n}(r.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).add=function(){a.transform(),a.stop(),a.addEventListener(),a.props.stage.addChild(a.spriteEl)},a.addEventListener=function(){a.spriteEl.addEventListener("click",a.onClick)},a.calculateYOffset=function(e){var t=0;return v.forEach((function(n){var r=n.after.idx;a.state.idx>=r&&(t+=5*e/12+2*y)})),t},a.checkBounds=function(){var e=a.state.transform,t=e.h>a.props.stage.canvas.height;if(a.state.isPlaying)t?-a.props.y<e.y&&-a.props.y>e.y+e.h&&a.stop():(e.y<-a.props.y||e.y+e.h>-a.props.y+a.props.stage.canvas.height)&&a.stop();else{if(!e||a.state.hasPlayed)return;(t&&-a.props.y<e.y&&-a.props.y>e.y+e.h||e.y>-a.props.y&&e.y+e.h<-a.props.y+a.props.stage.canvas.height)&&a.play()}},a.componentDidUpdate=function(e){e.y!==a.props.y&&a.checkBounds()},a.check=function(){a.spriteEl.currentFrame===a.spriteEl.spriteSheet._frames.length-1&&(a.stop(),a.setState({hasPlayed:!0}),u.a.Ticker.off("tick",a.check))},a.handleLoad=function(e){a.spriteEl=new u.a.Sprite(e.result,a.id),a.props.handleLoad(a.props.id,"sprites"),a.add()},a.load=function(){var e=new u.a.LoadQueue(!1),t={src:a.props.src,id:a.props.id,type:"spritesheet",crossOrigin:!0};e.loadManifest(t,!0),e.on("fileload",a.handleLoad)},a.onClick=function(e){a.state.hasPlayed&&a.play()},a.play=function(){a.state.hasPlayed?(a.spriteEl.gotoAndPlay(0),a.setState({hasPlayed:!1})):(a.setState({isPlaying:!0}),a.spriteEl.play(),u.a.Ticker.on("tick",a.check))},a.stop=function(){a.spriteEl.stop(),a.setState({isPlaying:!1})},a.transform=function(){var e=window,t=e.innerWidth,n=e.innerHeight,r=window.innerWidth/10<C?C:window.innerWidth/10,s={x:0,y:0,w:0,h:0},i=1440,d=i+2*y>t,o=window.innerWidth<=600;s.w=d?t-r:i,s.w=o?t:s.w,s.h=480/i*s.w,s.x=(t-s.w)/2,s.x=o?0:s.x,s.y=n+s.h*a.state.idx+2*y*(a.state.idx+1),s.y+=a.calculateYOffset(s.h);var c=s.w/i;a.spriteEl.scaleX=c,a.spriteEl.scaleY=c,a.spriteEl.x=s.x,a.spriteEl.y=s.y,a.setState({transform:s}),"CARD_1"===a.props.id&&a.props.setTransform(s,"sprites")};var r=e.id.split("_");return a.state={idx:Number(r[r.length-1])-1,transform:{x:0,y:0,w:0,h:0}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return null}}]),n}(r.a.Component),A=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).add=function(){a.transform(),a.props.stage.addChild(a.stillEl)},a.calculateYOffset=function(e){var t=0;return v.forEach((function(n){var r=n.after.idx;a.state.idx>=r&&(t+=5*e/12+2*y)})),t},a.handleLoad=function(e){a.stillEl=new u.a.Bitmap(e.target,a.props.id),a.props.handleLoad(a.props.id,"stills"),a.add()},a.load=function(){var e=new Image;e.src=a.props.src,e.onload=a.handleLoad},a.transform=function(){var e=window,t=e.innerWidth,n=e.innerHeight,r=window.innerWidth/10<C?C:window.innerWidth/10,s={x:0,y:0,w:0,h:0},i=1440,d=i+2*y>t,o=window.innerWidth<=600;s.w=d?t-r:i,s.w=o?t:s.w,s.h=480/i*s.w,s.x=(t-s.w)/2,s.x=o?0:s.x,s.y=n+s.h*a.state.idx+2*y*(a.state.idx+1),s.y+=a.calculateYOffset(s.h);var c=s.w/i;a.stillEl.scaleX=c,a.stillEl.scaleY=c,a.stillEl.x=s.x,a.stillEl.y=s.y,a.setState({transform:s})};var r=e.id.split("_");return a.state={idx:Number(r[r.length-1])-1,transform:{x:0,y:0,w:0,h:0}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return Object(x.jsx)("div",{})}}]),n}(r.a.Component);window.createjs=u.a;var b=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).addEventListeners=function(){document.addEventListener("mousewheel",a.scroll),document.addEventListener("DOMMouseScroll",a.scroll),window.addEventListener("resize",a.resize)},a.calculateLowerBound=function(){var e=g.length+f.length,t=v.length,n=e*a.state.assetTransform.sprites.h+t*a.state.assetTransform.placards.h;n+=m*y*2,a.setState({lowerBound:n})},a.changeBackground=function(){var e=360;setInterval((function(){var t=Math.abs(e%720-360),n=Math.abs((e+90)%720-360);e++,document.body.style.background="linear-gradient(to right, hsl("+t+",70%, 75%) 0%,hsl("+n+",90%,75%) 100%)"}),64)},a.draw=function(){a.stage.update()},a.onLoad=function(){var e=a.state.loadedElements+1===m;a.setState({loadedElements:a.state.loadedElements+1,hasLoaded:e}),e&&a.calculateLowerBound()},a.scroll=function(e){var t=a.state.y-e.deltaY/2;Math.abs(t)>window.innerHeight&&!a.areButtonsShowing||Math.abs(a.state.y)<window.innerHeight&&a.areButtonsShowing,t>0||-t>a.state.lowerBound&&a.state.lowerBound||(a.setState({hasScrolled:!0,y:t}),u.a.Tween.get(a.stage,{override:!0}).to({y:t},300))},a.setTransform=function(e,t){a.setState({assetTransform:Object.assign({},a.state.assetTransform,Object(d.a)({},t,e))})},a.setup=function(){a.stage=new u.a.Stage("canvas"),console.log(a.stage);var e=a.stage.canvas.getContext("2d");e.webkitImageSmoothingEnabled=e.mozImageSmoothingEnabled=!0,a.resize(),u.a.Ticker.timingMode=u.a.Ticker.RAF_SYNCHED,u.a.Ticker.framerate=15,u.a.Ticker.on("tick",a.draw),a.stage.enableMouseOver(20)},a.renderLanding=function(){return Object(x.jsx)(w,{stage:a.stage,loadedPercentage:a.state.loadedElements/m,hasScrolled:a.state.hasScrolled})},a.renderPlacard=function(e){var t=e.id,n=e.src,r=e.after;return Object(x.jsx)(j,{id:t,stage:a.stage,handleLoad:a.onLoad,setTransform:a.setTransform,src:n,after:r},t)},a.renderSprite=function(e){var t=e.id,n=e.src;return Object(x.jsx)(S,{id:t,stage:a.stage,handleLoad:a.onLoad,setTransform:a.setTransform,src:n,y:a.state.y},t)},a.renderStill=function(e){var t=e.id,n=e.src;return Object(x.jsx)(A,{id:t,stage:a.stage,handleLoad:a.onLoad,src:n},t)},a.resize=function(){var e=a.state.y/a.state.lowerBound;if(a.stage.canvas.width=window.innerWidth,a.stage.canvas.height=window.innerHeight,a.stage.scaleX=window.innerWidth/a.stage.canvas.width,a.stage.scaleY=window.innerHeight/a.stage.canvas.height,a.state.hasLoaded){a.calculateLowerBound();var t=a.state.y-e*a.state.lowerBound,n=a.state.y-t;n>a.lowerBound&&(n=-a.lowerBound),u.a.Tween.get(a.stage).to({y:n},200),a.setState({y:n}),a.stage.update()}},a.state={areButtonsShowing:!1,assetTransform:{sprites:{},placards:{}},hasLoaded:!1,hasScrolled:!1,y:0,lowerBound:0,loadedElements:0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setup(),this.addEventListeners(),this.changeBackground()}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("canvas",{id:"canvas"}),this.renderLanding(),g.map(this.renderSprite),f.map(this.renderStill),v.map(this.renderPlacard)]})}}]),n}(r.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};i.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(b,{})}),document.getElementById("root")),L()}},[[20,1,2]]]);
//# sourceMappingURL=main.4561b7b5.chunk.js.map